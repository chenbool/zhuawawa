var HandModel=function(){function t(){}return t.prototype.run=function(t){return this.handBox=t.handBox,this.rope=t.rope,[this.handBox,this.rope,t]},t}(),GameModel=function(){function t(){this.handPos={x:0,y:0},this.dollRun()}return t.prototype.dollRun=function(){var t=new DollModel;this.resArray=t.create(),Laya.timer.loop(50,this,this.moveTo)},t.prototype.handRun=function(t){var e=new HandModel,a=e.run(t);this.handBox=a[0],this.rope=a[1],Laya.timer.loop(100,this,this.handMove)},t.prototype.moveTo=function(t){this.resArray[0].x<=-500&&(Laya.timer.clear(this,this.moveTo),this.resArray.forEach(function(t){Laya.stage.removeChild(t)}),this.dollRun());var e=this;this.resArray.forEach(function(t){e.dollPos={x:t.x,y:t.y},e.handPos.y<465&&e.handPos.y>425&&(e.dollPos.x<-150&&e.dollPos.x>-250?(e.collision(),Laya.Tween.to(e.handBox,{y:40},2e3,Laya.Ease.elasticOut,null,100),Laya.Tween.to(e.rope,{height:20},2e3,Laya.Ease.elasticOut,null,100),e.dollPos.x=-200,e.resArray.forEach(function(t){Laya.Tween.to(t,{y:-(e.handBox.y-100)},1e3,Laya.Ease.elasticOut,null,100),Laya.Tween.to(t,{y:e.handBox.y},1e3,Laya.Ease.elasticOut,null,500),t.disabled=!0}),Laya.timer.clear(e,e.moveTo),e.handPos.y=40,setTimeout(function(){e.resArray.forEach(function(t){Laya.stage.removeChild(t)}),e.dollRun()},3e3)):(Laya.Tween.to(e.handBox,{y:40},2e3,Laya.Ease.elasticOut,null,100),Laya.Tween.to(e.rope,{height:20},2e3,Laya.Ease.elasticOut,null,100),e.handPos.y=40)),t.x-=10})},t.prototype.handMove=function(){return this.handBox.y>=520?(Laya.timer.clear(this,this.handMove),!0):(this.handPos={x:this.handBox.x,y:this.handBox.y},this.handBox.y+=100,void(this.rope.height+=100))},t.prototype.collision=function(){var t=this.handBox.getChildByName("left"),e=this.handBox.getChildByName("right");return Laya.Tween.to(t,{skewX:-40},500,Laya.Ease.elasticOut,null,0),Laya.Tween.to(e,{skewX:40},500,Laya.Ease.elasticOut,null,0),Laya.Tween.to(t,{skewX:0},500,Laya.Ease.elasticOut,null,500),Laya.Tween.to(e,{skewX:0},500,Laya.Ease.elasticOut,null,500),!0},t}(),DollModel=function(){function t(){this.face=0,this.smoke=0,this.packet=0,this.MoveX=20,this._init()}return t.prototype._init=function(){this.face=Tool.rand(4),this.smoke=Tool.rand(3)},t.prototype.create=function(){return this.createDoll(),this.createFace(),this.createPacket(),this.createSmoke(),[this.faceSP,this.smokeSP,this.packetSP,this.dollSP]},t.prototype.createDoll=function(){this.dollSP=new Laya.Sprite,this.dollSP.loadImage("ui/doll.png",393,578,83,89),Laya.stage.addChild(this.dollSP)},t.prototype.createFace=function(){this.faceSP=new Laya.Sprite,this.faceSP.loadImage("ui/face_"+this.face+".png",415,600,44,36),Laya.stage.addChild(this.faceSP)},t.prototype.createPacket=function(){this.packetSP=new Laya.Sprite,this.packetSP.loadImage("ui/rand-packet.png",420,620,36,35),Laya.stage.addChild(this.packetSP)},t.prototype.createSmoke=function(){this.smokeSP=new Laya.Sprite,this.smokeSP.loadImage("ui/smoke_"+this.smoke+".png",393,650,86,65),Laya.stage.addChild(this.smokeSP)},t}(),Init=function(){function t(){Laya.init(480,800),this.init()}return t.prototype.init=function(){Laya.stage.scaleMode=Laya.Stage.SCALE_EXACTFIT,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.screenMode=Laya.Stage.SCREEN_VERTICAL;var t=[{url:"res/atlas/ui.json",type:Laya.Loader.ATLAS},{url:"ui/bg-index_bd.jpg",type:Laya.Loader.IMAGE}];Laya.loader.load(t,Laya.Handler.create(this,this.onLoaded),Laya.Handler.create(this,this.onProgress))},t.prototype.onProgress=function(t){console.log("游戏加载进度: ",t)},t.prototype.onLoaded=function(){var t=new GameView;Laya.stage.addChild(t)},t}(),Tool=function(){function t(){}return t.rand=function(t){return void 0===t&&(t=10),Math.round(Math.random()*t)},t}(),Action=function(){function t(){}return t}(),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function o(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}}(),View=laya.ui.View,Dialog=laya.ui.Dialog,ui;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.GameUI.uiView)},a.uiView={type:"View",props:{y:0,x:0,width:480,height:800},child:[{type:"Image",props:{y:0,x:0,width:480,skin:"ui/bg-index_bd.jpg",height:750}},{type:"Image",props:{y:750,x:0,width:481,skin:"ui/foot.png",height:52,sizeGrid:"48,0,21,0"}},{type:"Button",props:{y:753,x:412,width:62,"var":"startBtn",stateNum:"2",skin:"ui/button.png",sizeGrid:"0,0,0,0",labelSize:18,labelPadding:"0,1,1,1",labelFont:"SimHei",labelColors:"white,white,white",labelAlign:"center",label:"开始",height:46}},{type:"Box",props:{y:45,x:179,width:118,"var":"handBox",height:108},child:[{type:"Image",props:{y:39,x:10,width:59,skin:"ui/hand_01.png",pivotY:38.80597014925375,pivotX:10.44776119402988,name:"left",height:108}},{type:"Image",props:{y:39,x:108,width:59,skin:"ui/hand_01.png",skewY:180,pivotY:38.80597494834005,pivotX:10.44776119402971,name:"right",height:108}}]},{type:"Image",props:{y:25,x:227,width:20,"var":"rope",skin:"ui/rope_1.png",height:20}},{type:"Box",props:{y:-1,x:166},child:[{type:"Image",props:{width:147,skin:"ui/tishi.png",height:40}},{type:"Image",props:{y:4,x:40,width:79,skin:"ui/tishi11_01.png",height:37}}]}]},a}(View);t.GameUI=e}(ui||(ui={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function o(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}}(),GameView=function(t){function e(){var e=t.call(this)||this;return e.game=new GameModel,e.startBtn.on(Laya.Event.CLICK,e,e.handRun),e}return __extends(e,t),e.prototype.handRun=function(){this.game.handRun(this),this.startBtn.disabled=!0,this.startBtn.label="稍等";var t=this;setTimeout(function(){t.startBtn.disabled=!1,t.startBtn.label="开始"},3e3)},e}(ui.GameUI),Main=function(){function t(){new Init}return t}();new Main;